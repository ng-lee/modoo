<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
    <head>
        <meta charset="UTF-8">
        <title>ëª¨ì„ ìƒì„±</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    </head>
    <body>
        <!-- Header -->
        <div class="header">
            <div class="logo">modoo</div>
            <div class="region">
                <button>â–½ ë¶€í‰êµ¬</button>
            </div>
            <div class="search"><input type="text" placeholder="ê²€ìƒ‰"/></div>
            <div class="profile">ğŸ‘¤</div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <h3>category</h3>
            <select name="category" id="category">
                <option value="">-- ì¹´í…Œê³ ë¦¬ ì„ íƒ --</option>
                <th:block th:each="category : ${categoryList}">
                    <option th:value="${category.metadataCd}" th:text="${category.contents}"></option>
                </th:block>
            </select>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <section>
                <h2>ëª¨ì„ ìƒì„±</h2>

                <div class="form-group">
                    <label for="clubs_name">ëª¨ì„ëª…</label>
                    <input type="text" id="clubs_name"/>
                </div>

                <div class="form-group">
                    <label>ëŒ€í‘œ ì´ë¯¸ì§€</label>
                    <div class="image-box"></div>
                </div>

                <div class="form-group">
                    <label>ì²¨ë¶€ ì´ë¯¸ì§€ (ì„ íƒ)</label>
                    <div class="image-upload-row">
                        <div class="image-box small"></div>
                        <div class="image-box small"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="clubs_capacity">ì •ì›</label>
                    <input type="text" min="0" max="100" id="clubs_capacity"/>
                </div>

                <div class="form-group">
                    <label for="clubs_contents">ëª¨ì„ ìƒì„¸ ë‚´ìš©</label>
                    <textarea class="detail-textarea" rows="5" id="clubs_contents"></textarea>
                </div>

                <div class="form-buttons">
                    <button class="btn cancel">ì·¨ì†Œ</button>
                    <button class="btn submit" onclick="createClubs();">ì‘ì„± ì™„ë£Œ</button>
                </div>
            </section>
        </div>
        <script th:inline="javascript">
            $(document).ready(function () {
            });

            /*ë¹ˆ ê°’ í™•ì¸*/
            function isEmpty(str) {
                if (typeof str == "undefined" || str === "undefined" || str == null || $.trim(str).length < 1) return true;
                else return false ;
            }

            /*ëª¨ì„ ì €ì¥*/
            function createClubs() {
                let param = {};
                if (isEmpty($('#clubs_name').val())) {
                    console.log($('#clubs_name').val());
                    alert('ëª¨ì„ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    $('#clubs_name').focus();
                    return false;
                }
                if (isEmpty($('#clubs_contents').val())) {
                    alert('ëª¨ì„ ìƒì„¸ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    $('#clubs_contents').focus();
                    return false;
                }
                if (isEmpty($('#clubs_capacity').val())) {
                    alert('ëª¨ì„ ì •ì›ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    $('#clubs_capacity').focus();
                    return false;
                }
                if (isEmpty($('select[name="category"]').val())) {
                    alert('ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    $('select[name="category"]').focus();
                    return false;
                }
                param.name = $('#clubs_name').val();
                param.contents = $('#clubs_contents').val();
                param.capacity = $('#clubs_capacity').val();
                param.categoryCd = $('select[name="category"]').val();
                param.regionCd = 1;

                $.ajax({
                    type: "POST",
                    url: "/api/clubs/create",
                    contentType: 'application/json',
                    data: JSON.stringify(param),
                    success: function(response) {
                        console.log(response);
                        alert("ê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
                    },
                    error: function(xhr, status, error) {
                        alert("ì˜¤ë¥˜ ë°œìƒ");
                        console.error("ìƒíƒœ ì½”ë“œ:", status);
                        console.error("ì‘ë‹µ:", xhr.responseText);
                    }
                });
            }
        </script>
    </body>
</html>